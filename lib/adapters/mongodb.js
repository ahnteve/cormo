// Generated by CoffeeScript 1.3.3
(function() {
  var mongodb, _wrapError;

  try {
    mongodb = require('mongodb');
  } catch (error) {
    console.log('Install mongodb module to use this adapter');
    process.exit(1);
  }

  _wrapError = function(msg, cause) {
    error = new Error(msg);
    error.cause = cause;
    return error;
  };

  /*
  # Initialize MongoDB adapter
  # @param {Connection} connection
  # @param {Object} settings
  # @param {String} [settings.host]
  # @param {Number} [settings.port]
  # @param {String} settings.database
  # @param {Function} callback
  # @param {Error} callback.error
  # @param {MongoDBAdapter} callback.adapter
  */


  module.exports = function(connection, settings, callback) {
    var db, server;
    server = new mongodb.Server(settings.host || 'localhost', settings.port || 27017, {});
    db = new mongodb.Db(settings.database, server, {});
    return db.open(function(error, collection) {
      if (error) {
        return callback(_wrapError('unknown error', error));
      }
      return callback(null);
    });
  };

}).call(this);
