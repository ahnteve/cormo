// Generated by CoffeeScript 2.3.1
var CommandRemoteConsole, net;

net = require('net');

//#
// Connect to remote CORMO console
CommandRemoteConsole = class CommandRemoteConsole {
  //#
  // @param argv
  constructor(argv) {
    this.argv = argv.slice(3);
  }

  //#
  // Runs this command
  run() {
    var socket;
    if (this.argv.length === 0) {
      this.help();
      return;
    }
    socket = net.connect.apply(net, this.argv);
    process.stdin.pipe(socket);
    socket.pipe(process.stdout);
    socket.on('connect', function() {
      process.stdin.setRawMode(true);
    });
    socket.once('close', function() {
      process.stdin.emit('end');
    });
    process.stdin.on('end', function() {
      process.stdin.setRawMode(false);
      socket.end();
      console.log(); // ensure newline
    });
  }

  //#
  // Shows help
  help() {
    console.log('Usage: cormo remote-console port [host]');
    console.log('Usage: cormo remote-console path');
  }

};

module.exports = CommandRemoteConsole;
