<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>CORMO - BaseModel</title><script>if (location.protocol.match(/^http/) && location.pathname.match('\.html') === null && location.pathname.slice(-1) !== '/') {
  location.href = location.href + '/';
}</script><link href="../bootstrap-3.2.0-dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script><script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]--><link href="../google-code-prettify/prettify.css" rel="stylesheet" type="text/css"><link href="../style.css" rel="stylesheet" type="text/css"></head><body data-spy="scroll" data-target=".sidebar"><nav class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#top-navigation-collapse"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div class="collapse navbar-collapse" id="top-navigation-collapse"><ul class="nav navbar-nav"><li><a href="../index.html">Home</a></li><li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Guides <span class="caret"></span></a><ul class="dropdown-menu"><li><a href="../guides/Aggregation.html">Aggregation</a></li><li><a href="../guides/Association.html">Association</a></li><li><a href="../guides/Callback.html">Callback</a></li><li><a href="../guides/Constraint.html">Constraint</a></li><li><a href="../guides/CreateRecords.html">Create records</a></li><li><a href="../guides/DefineModels.html">Define models</a></li><li><a href="../guides/Geospatial.html">Geospatial</a></li><li><a href="../guides/Miscellaneous.html">Miscellaneous</a></li><li><a href="../guides/Query.html">Query</a></li><li><a href="../guides/Validation.html">Validation</a></li></ul></li><li><a href="../modules/index.html">Modules</a></li><li class="active"><a href="../classes/index.html">Classes - BaseModel</a></li><li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Files <span class="caret"></span></a><ul class="dropdown-menu"><li><a href="../files/decorators.ts.html">decorators.ts</a></li><li><a href="../files/index.ts.html">index.ts</a></li><li><a href="../files/query.ts.html">query.ts</a></li><li><a href="../files/types.ts.html">types.ts</a></li><li><a href="../files/adapters.base.ts.html">adapters/base.ts</a></li><li><a href="../files/adapters.mongodb.ts.html">adapters/mongodb.ts</a></li><li><a href="../files/adapters.mysql.ts.html">adapters/mysql.ts</a></li><li><a href="../files/adapters.postgresql.ts.html">adapters/postgresql.ts</a></li><li><a href="../files/adapters.redis.ts.html">adapters/redis.ts</a></li><li><a href="../files/adapters.sql_base.ts.html">adapters/sql_base.ts</a></li><li><a href="../files/adapters.sqlite3.ts.html">adapters/sqlite3.ts</a></li><li><a href="../files/adapters.sqlite3_memory.ts.html">adapters/sqlite3_memory.ts</a></li><li><a href="../files/command.index.ts.html">command/index.ts</a></li><li><a href="../files/connection.index.ts.html">connection/index.ts</a></li><li><a href="../files/model.index.ts.html">model/index.ts</a></li><li><a href="../files/util.index.ts.html">util/index.ts</a></li><li><a href="../files/util.inflector.ts.html">util/inflector.ts</a></li></ul></li></ul><div class="options"><label class="checkbox"><input id="options-private" type="checkbox"> Private </label></div></div></div></nav><div class="container-fluid content"><div class="row"><div class="hidden-xs sidebar col-sm-3" data-spy="affix"><div class="cormo-sidenav"><div class="panel panel-default"><div class="panel-collapse collapse in" id="undefined_body"><ul class="nav nav-pills nav-stacked"><li class="active"><a href="#BaseModel">BaseModel</a></li><li class="cormo-class-property"><a href="#BaseModel__adapter">_adapter<span class="pull-right label label-static">static</span><span class="pull-right label label-property">property</span></a></li><li class="cormo-class-property"><a href="#BaseModel__collapseNestedNulls">_collapseNestedNulls<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel__connection">_connection<span class="pull-right label label-static">static</span><span class="pull-right label label-property">property</span></a></li><li class="cormo-class-property private"><a href="#BaseModel_addCallback">addCallback<span class="pull-right label label-private">private</span><span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_addValidator">addValidator<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_afterCreate">afterCreate<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_afterDestroy">afterDestroy<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_afterFind">afterFind<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_afterInitialize">afterInitialize<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_afterSave">afterSave<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_afterUpdate">afterUpdate<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_afterValidate">afterValidate<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_archive">archive<span class="pull-right label label-static">static</span><span class="pull-right label label-property">property</span></a></li><li class="cormo-class-property"><a href="#BaseModel_beforeCreate">beforeCreate<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_beforeDestroy">beforeDestroy<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_beforeSave">beforeSave<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_beforeUpdate">beforeUpdate<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_beforeValidate">beforeValidate<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_belongsTo">belongsTo<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_build">build<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_column">column<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_connection">connection<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_count">count<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_create">create<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_createBulk">createBulk<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_delete">delete<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_deleteAll">deleteAll<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel__destroy">destroy</a></li><li class="cormo-class-property"><a href="#BaseModel_dirty_tracking">dirty_tracking<span class="pull-right label label-static">static</span><span class="pull-right label label-property">property</span></a></li><li class="cormo-class-property"><a href="#BaseModel_drop">drop<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_find">find<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_findPreserve">findPreserve<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel__get">get</a></li><li class="cormo-class-property"><a href="#BaseModel__getChanged">getChanged</a></li><li class="cormo-class-property"><a href="#BaseModel__getPrevious">getPrevious</a></li><li class="cormo-class-property"><a href="#BaseModel_group">group<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_hasMany">hasMany<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_hasOne">hasOne<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_index">index<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel__isDirty">isDirty</a></li><li class="cormo-class-property"><a href="#BaseModel_lean_query">lean_query<span class="pull-right label label-static">static</span><span class="pull-right label label-property">property</span></a></li><li class="cormo-class-property"><a href="#BaseModel_newModel">newModel<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_order">order<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_query">query<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel__reset">reset</a></li><li class="cormo-class-property"><a href="#BaseModel__save">save</a></li><li class="cormo-class-property"><a href="#BaseModel_select">select<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel__set">set</a></li><li class="cormo-class-property"><a href="#BaseModel_timestamps">timestamps<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel_update">update<span class="pull-right label label-static">static</span></a></li><li class="cormo-class-property"><a href="#BaseModel__validate">validate</a></li><li class="cormo-class-property"><a href="#BaseModel_where">where<span class="pull-right label label-static">static</span></a></li><li><a href="../classes/Command.html">Command</a></li><li><a href="../classes/Connection.html">Connection</a></li><li><a href="../classes/Query.html">Query</a></li></ul></div></div><div class="panel panel-default"><div class="panel-heading" data-toggle="collapse" data-target="#adapter_body">adapter<span class="pull-right glyphicon"></span></div><div class="panel-collapse collapse in" id="adapter_body"><ul class="nav nav-pills nav-stacked"><li><a href="../classes/adapter.AdapterBase.html">AdapterBase</a></li></ul></div></div></div></div><div class="col-sm-9 col-sm-offset-3"><span class="fix-anchor" id="BaseModel"></span><section><h1 class="class_title">BaseModel</h1><div><p>Base class for models</p>
</div><div></div><div class="panel panel-info"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_ctor_body"><h3 class="panel-title">Constructor<span class="pull-right glyphicon"></span></h3></div><div class="panel-collapse collapse" id="BaseModel_ctor_body"><div class="panel-body"><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L853">/src/model/index.ts:853</a>)</span></div><pre class="sourcecode prettyprint .linenums:853">public constructor(data?: object) {
    data = data || {};
    const ctor = this.constructor as typeof BaseModel;
    const schema = ctor._schema;
    const adapter = ctor._adapter;

    Object.defineProperty(this, '_prev_attributes', { writable: true, value: {} });
    if (ctor.dirty_tracking) {
      Object.defineProperty(this, '_attributes', { value: {} });
      Object.defineProperty(this, '_intermediates', { value: {} });
      for (const path of Object.keys(ctor._intermediate_paths).sort()) {
        const [obj, last] = util.getLeafOfPath(this, path);
        this._intermediates[path] = {};
        this._defineProperty(obj, last, path, false);
      }
      // tslint:disable-next-line:forin
      for (const column in schema) {
        const property = schema[column];
        if (property.primary_key) {
          continue;
        }
        const [obj, last] = util.getLeafOfPath(this, property._parts);
        this._defineProperty(obj, last, column, false);
      }
    } else {
      Object.defineProperty(this, 'isDirty', { value: _pf_isDirty });
      Object.defineProperty(this, 'getChanged', { value: _pf_getChanged });
      Object.defineProperty(this, 'get', { value: _pf_get });
      Object.defineProperty(this, 'getPrevious', { value: _pf_getPrevious });
      Object.defineProperty(this, 'set', { value: _pf_set });
      Object.defineProperty(this, 'reset', { value: _pf_reset });
    }

    if (ctor._object_column_classes) {
      for (const { column, klass } of ctor._object_column_classes) {
        (this as any)[column] = new klass();
      }
    }

    if (arguments.length === 4) {
      // if this has 4 arguments, this is called from adapter with database record data
      const id = arguments[1];
      const selected_columns = arguments[2];
      const selected_columns_raw = arguments[3];
      adapter.setValuesFromDB(this, data, schema, selected_columns);
      ctor._collapseNestedNulls(this, selected_columns_raw, ctor.dirty_tracking ? this._intermediates : undefined);
      Object.defineProperty(this, 'id', {
        configurable: false,
        enumerable: true,
        value: id,
        writable: false,
      });
      Object.defineProperty(this, '_is_persisted', {
        configurable: false,
        enumerable: false,
        value: true,
        writable: false,
      });
      this._runCallbacks('find', 'after');
    } else {
      // tslint:disable-next-line:forin
      for (const column in schema) {
        const property = schema[column];
        if (property.primary_key) {
          continue;
        }
        const parts = property._parts;
        let value = util.getPropertyOfPath(data, parts);
        if (value === undefined) {
          value = null;
        }
        util.setPropertyOfPath(this, parts, value);
      }
      ctor._collapseNestedNulls(this, null, ctor.dirty_tracking ? this._intermediates : undefined);
      Object.defineProperty(this, 'id', {
        configurable: true,
        enumerable: true,
        value: null,
        writable: false,
      });
    }
    this._runCallbacks('initialize', 'after');
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel__adapter"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel__adapter_body"><h3 class="panel-title">BaseModel._adapter<span class="label label-static">static</span><span class="label label-property">property</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Indicates the adapter associated to this model</p>
</div></div><div class="panel-collapse collapse" id="BaseModel__adapter_body"><div class="panel-body"><div></div><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L107">/src/model/index.ts:107</a>)</span></div><pre class="sourcecode prettyprint .linenums:107">public static _adapter: AdapterBase;</pre></div></div></div></section><span class="fix-anchor" id="BaseModel__collapseNestedNulls"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel__collapseNestedNulls_body"><h3 class="panel-title">BaseModel._collapseNestedNulls()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Set nested object null if all children are null</p>
</div></div><div class="panel-collapse collapse" id="BaseModel__collapseNestedNulls_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L346">/src/model/index.ts:346</a>)</span></div><pre class="sourcecode prettyprint .linenums:346">public static _collapseNestedNulls(instance: any, selected_columns_raw: any, intermediates: any) {
    for (const path of Object.keys(this._intermediate_paths)) {
      if (selected_columns_raw &amp;&amp; selected_columns_raw.indexOf(path) === -1) {
        continue;
      }
      let obj;
      let last: any;
      if (intermediates) {
        obj = intermediates;
        last = path;
      } else {
        [obj, last] = util.getLeafOfPath(instance, path);
      }
      let has_non_null = false;
      // tslint:disable-next-line:forin
      for (const key in obj[last]) {
        const value = obj[last][key];
        if (value != null) {
          has_non_null = true;
        }
      }
      if (!has_non_null) {
        obj[last] = null;
      }
    }
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel__connection"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel__connection_body"><h3 class="panel-title">BaseModel._connection<span class="label label-static">static</span><span class="label label-property">property</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Indicates the connection associated to this model</p>
</div></div><div class="panel-collapse collapse" id="BaseModel__connection_body"><div class="panel-body"><div></div><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L102">/src/model/index.ts:102</a>)</span></div><pre class="sourcecode prettyprint .linenums:102">public static _connection: Connection;</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_addCallback"></span><section class="private"><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_addCallback_body"><h3 class="panel-title">BaseModel.addCallback()<span class="label label-private">private</span><span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Adds a callback</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_addCallback_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L770">/src/model/index.ts:770</a>)</span></div><pre class="sourcecode prettyprint .linenums:770">private static addCallback(type: ModelCallbackType, name: ModelCallbackName, method: ModelCallbackMethod) {
    this._checkConnection();
    if (!(type === 'before' || type === 'after') || !name) {
      return;
    }
    const callbacks_map = this._callbacks_map || (this._callbacks_map = {});
    const callbacks = callbacks_map[name] || (callbacks_map[name] = []);
    return callbacks.push({ type, method });
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_addValidator"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_addValidator_body"><h3 class="panel-title">BaseModel.addValidator()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Adds a validator
A validator must return false(boolean) or error message(string), or throw an Error exception if invalid</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_addValidator_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L696">/src/model/index.ts:696</a>)</span></div><pre class="sourcecode prettyprint .linenums:696">public static addValidator(validator: any) {
    this._checkConnection();
    this._validators.push(validator);
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_afterCreate"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_afterCreate_body"><h3 class="panel-title">BaseModel.afterCreate()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Adds a callback of after creating</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_afterCreate_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L456">/src/model/index.ts:456</a>)</span></div><pre class="sourcecode prettyprint .linenums:456">public static afterCreate(method: ModelCallbackMethod) {
    this.addCallback('after', 'create', method);
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_afterDestroy"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_afterDestroy_body"><h3 class="panel-title">BaseModel.afterDestroy()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Adds a callback of after destroying</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_afterDestroy_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L484">/src/model/index.ts:484</a>)</span></div><pre class="sourcecode prettyprint .linenums:484">public static afterDestroy(method: ModelCallbackMethod) {
    this.addCallback('after', 'destroy', method);
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_afterFind"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_afterFind_body"><h3 class="panel-title">BaseModel.afterFind()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Adds a callback of after finding</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_afterFind_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L428">/src/model/index.ts:428</a>)</span></div><pre class="sourcecode prettyprint .linenums:428">public static afterFind(method: ModelCallbackMethod) {
    this.addCallback('after', 'find', method);
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_afterInitialize"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_afterInitialize_body"><h3 class="panel-title">BaseModel.afterInitialize()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Adds a callback of after initializing</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_afterInitialize_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L421">/src/model/index.ts:421</a>)</span></div><pre class="sourcecode prettyprint .linenums:421">public static afterInitialize(method: ModelCallbackMethod) {
    this.addCallback('after', 'initialize', method);
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_afterSave"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_afterSave_body"><h3 class="panel-title">BaseModel.afterSave()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Adds a callback of after saving</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_afterSave_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L442">/src/model/index.ts:442</a>)</span></div><pre class="sourcecode prettyprint .linenums:442">public static afterSave(method: ModelCallbackMethod) {
    this.addCallback('after', 'save', method);
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_afterUpdate"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_afterUpdate_body"><h3 class="panel-title">BaseModel.afterUpdate()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Adds a callback of after updating</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_afterUpdate_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L470">/src/model/index.ts:470</a>)</span></div><pre class="sourcecode prettyprint .linenums:470">public static afterUpdate(method: ModelCallbackMethod) {
    this.addCallback('after', 'update', method);
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_afterValidate"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_afterValidate_body"><h3 class="panel-title">BaseModel.afterValidate()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Adds a callback of after validating</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_afterValidate_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L498">/src/model/index.ts:498</a>)</span></div><pre class="sourcecode prettyprint .linenums:498">public static afterValidate(method: ModelCallbackMethod) {
    this.addCallback('after', 'validate', method);
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_archive"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_archive_body"><h3 class="panel-title">BaseModel.archive<span class="label label-static">static</span><span class="label label-property">property</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Archives deleted records in the archive table</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_archive_body"><div class="panel-body"><div></div><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L90">/src/model/index.ts:90</a>)</span></div><pre class="sourcecode prettyprint .linenums:90">public static archive = false;</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_beforeCreate"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_beforeCreate_body"><h3 class="panel-title">BaseModel.beforeCreate()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Adds a callback of before creating</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_beforeCreate_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L449">/src/model/index.ts:449</a>)</span></div><pre class="sourcecode prettyprint .linenums:449">public static beforeCreate(method: ModelCallbackMethod) {
    this.addCallback('before', 'create', method);
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_beforeDestroy"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_beforeDestroy_body"><h3 class="panel-title">BaseModel.beforeDestroy()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Adds a callback of before destroying</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_beforeDestroy_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L477">/src/model/index.ts:477</a>)</span></div><pre class="sourcecode prettyprint .linenums:477">public static beforeDestroy(method: ModelCallbackMethod) {
    this.addCallback('before', 'destroy', method);
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_beforeSave"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_beforeSave_body"><h3 class="panel-title">BaseModel.beforeSave()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Adds a callback of before saving</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_beforeSave_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L435">/src/model/index.ts:435</a>)</span></div><pre class="sourcecode prettyprint .linenums:435">public static beforeSave(method: ModelCallbackMethod) {
    this.addCallback('before', 'save', method);
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_beforeUpdate"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_beforeUpdate_body"><h3 class="panel-title">BaseModel.beforeUpdate()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Adds a callback of before updating</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_beforeUpdate_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L463">/src/model/index.ts:463</a>)</span></div><pre class="sourcecode prettyprint .linenums:463">public static beforeUpdate(method: ModelCallbackMethod) {
    this.addCallback('before', 'update', method);
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_beforeValidate"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_beforeValidate_body"><h3 class="panel-title">BaseModel.beforeValidate()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Adds a callback of before validating</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_beforeValidate_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L491">/src/model/index.ts:491</a>)</span></div><pre class="sourcecode prettyprint .linenums:491">public static beforeValidate(method: ModelCallbackMethod) {
    this.addCallback('before', 'validate', method);
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_belongsTo"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_belongsTo_body"><h3 class="panel-title">BaseModel.belongsTo()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Adds a belongs-to association</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_belongsTo_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L323">/src/model/index.ts:323</a>)</span></div><pre class="sourcecode prettyprint .linenums:323">public static belongsTo(target_model_or_column: string | typeof BaseModel, options?: IAssociationBelongsToOptions) {
    this._checkConnection();
    this._connection.addAssociation({ type: 'belongsTo', this_model: this, target_model_or_column, options });
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_build"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_build_body"><h3 class="panel-title">BaseModel.build()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Creates a record.
&#39;Model.build(data)&#39; is the same as &#39;new Model(data)&#39;</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_build_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L290">/src/model/index.ts:290</a>)</span></div><pre class="sourcecode prettyprint .linenums:290">public static build&lt;M extends BaseModel&gt;(
    this: new (data?: any) =&gt; M,
    data?: ModelValueObject&lt;M&gt;,
  ): M {
    return new this(data);
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_column"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_column_body"><h3 class="panel-title">BaseModel.column()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Adds a column to this model</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_column_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L191">/src/model/index.ts:191</a>)</span></div><pre class="sourcecode prettyprint .linenums:191">public static column(
    path: string, type_or_property: types.ColumnType | types.ColumnType[] | IColumnProperty | IColumnNestedProperty,
  ): void;</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_connection"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_connection_body"><h3 class="panel-title">BaseModel.connection()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Sets a connection of this model</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_connection_body"><div class="panel-body"><div><p>If this methods was not called explicitly, this model will use Connection.defaultConnection</p>
</div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L149">/src/model/index.ts:149</a>)</span></div><pre class="sourcecode prettyprint .linenums:149">public static connection(connection: Connection, name?: string) {
    if (this.hasOwnProperty('_connection')) {
      throw new Error('Model::connection was called twice');
    }
    if (!name) {
      name = this.name;
    }
    connection.models[name] = this;
    connection[name] = this;
    Object.defineProperty(this, '_connection', { value: connection });
    Object.defineProperty(this, '_adapter', { value: connection._adapter });
    Object.defineProperty(this, '_associations', { value: {} });
    Object.defineProperty(this, '_validators', { value: [] });
    Object.defineProperty(this, '_name', { value: name });
    Object.defineProperty(this, '_schema', { value: {} });
    Object.defineProperty(this, '_intermediate_paths', { value: {} });
    Object.defineProperty(this, '_indexes', { value: [] });
    Object.defineProperty(this, '_integrities', { value: [] });
    if (!this.table_name) {
      this.table_name = tableize(name);
    }
    this.column('id', 'recordid');
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_count"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_count_body"><h3 class="panel-title">BaseModel.count()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Counts records by conditions</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_count_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L658">/src/model/index.ts:658</a>)</span></div><pre class="sourcecode prettyprint .linenums:658">public static async count(condition?: object): Promise&lt;number&gt; {
    return await this.query().where(condition).count();
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_create"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_create_body"><h3 class="panel-title">BaseModel.create()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Creates a record and saves it to the database
&#39;Model.create(data)&#39; is the same as &#39;Model.build(data).save()&#39;</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_create_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L506">/src/model/index.ts:506</a>)</span></div><pre class="sourcecode prettyprint .linenums:506">public static async create&lt;M extends BaseModel&gt;(
    this: (new (data?: any) =&gt; M) &amp; typeof BaseModel,
    data?: ModelValueObject&lt;M&gt;,
    options?: { skip_log: boolean },
  ): Promise&lt;M&gt; {
    await this._checkReady();
    return await this.build&lt;M&gt;(data).save(options);
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_createBulk"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_createBulk_body"><h3 class="panel-title">BaseModel.createBulk()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Creates multiple records and saves them to the database.</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_createBulk_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L518">/src/model/index.ts:518</a>)</span></div><pre class="sourcecode prettyprint .linenums:518">public static async createBulk&lt;M extends BaseModel&gt;(
    this: (new (data?: any) =&gt; M) &amp; typeof BaseModel,
    data?: Array&lt;ModelValueObject&lt;M&gt;&gt;,
  ): Promise&lt;M[]&gt; {
    await this._checkReady();
    if (!Array.isArray(data)) {
      throw new Error('data is not an array');
    }
    if (data.length === 0) {
      return [];
    }
    const records = data.map((item) =&gt; {
      return this.build(item);
    });
    records.forEach((record) =&gt; record._applyDefaultValues());
    await Promise.all(records.map((record) =&gt; record.validate()));
    for (const record of records) {
      record._runCallbacks('save', 'before');
    }
    for (const record of records) {
      record._runCallbacks('create', 'before');
    }
    try {
      return await this._createBulk(records);
    } finally {
      for (const record of records) {
        record._runCallbacks('create', 'after');
      }
      for (const record of records) {
        record._runCallbacks('save', 'after');
      }
    }
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_delete"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_delete_body"><h3 class="panel-title">BaseModel.delete()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Deletes records by conditions</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_delete_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L672">/src/model/index.ts:672</a>)</span></div><pre class="sourcecode prettyprint .linenums:672">public static async delete(condition?: object): Promise&lt;number&gt; {
    return await this.query().where(condition).delete();
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_deleteAll"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_deleteAll_body"><h3 class="panel-title">BaseModel.deleteAll()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Deletes all records from the database</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_deleteAll_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L300">/src/model/index.ts:300</a>)</span></div><pre class="sourcecode prettyprint .linenums:300">public static async deleteAll() {
    await this.delete();
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel__destroy"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel__destroy_body"><h3 class="panel-title">BaseModel::destroy()<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Destroys this record (remove from the database)</p>
</div></div><div class="panel-collapse collapse" id="BaseModel__destroy_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L1018">/src/model/index.ts:1018</a>)</span></div><pre class="sourcecode prettyprint .linenums:1018">public async destroy() {
    this._runCallbacks('destroy', 'before');
    try {
      if (this.id) {
        const ctor = this.constructor as typeof BaseModel;
        await ctor.delete({ id: this.id });
      }
    } finally {
      this._runCallbacks('destroy', 'after');
    }
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_dirty_tracking"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_dirty_tracking_body"><h3 class="panel-title">BaseModel.dirty_tracking<span class="label label-static">static</span><span class="label label-property">property</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Tracks changes of a record if true</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_dirty_tracking_body"><div class="panel-body"><div></div><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L85">/src/model/index.ts:85</a>)</span></div><pre class="sourcecode prettyprint .linenums:85">public static dirty_tracking = false;</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_drop"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_drop_body"><h3 class="panel-title">BaseModel.drop()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Drops this model from the database</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_drop_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><h4>See Also:</h4><ul><li></li></ul><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L276">/src/model/index.ts:276</a>)</span></div><pre class="sourcecode prettyprint .linenums:276">public static async drop() {
    try {
      // do not need to apply schema before drop, only waiting connection established
      await this._connection._promise_connection;
      await this._adapter.drop(this._name);
    } finally {
      this._connection._schema_changed = true;
    }
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_find"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_find_body"><h3 class="panel-title">BaseModel.find()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Finds a record by id</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_find_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><h4>Throws:</h4><ul><li>{<span></span>} <span></span></li></ul><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L565">/src/model/index.ts:565</a>)</span></div><pre class="sourcecode prettyprint .linenums:565">public static find&lt;M extends BaseModel&gt;(
    this: (new (data?: any) =&gt; M) &amp; typeof BaseModel,
    id: types.RecordID,
  ): IQuerySingle&lt;M&gt;;</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_findPreserve"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_findPreserve_body"><h3 class="panel-title">BaseModel.findPreserve()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Finds records by ids while preserving order.</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_findPreserve_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><h4>Throws:</h4><ul><li>{<span></span>} <span></span></li></ul><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L584">/src/model/index.ts:584</a>)</span></div><pre class="sourcecode prettyprint .linenums:584">public static findPreserve&lt;M extends BaseModel&gt;(
    this: (new (data?: any) =&gt; M) &amp; typeof BaseModel,
    ids: types.RecordID[],
  ): IQueryArray&lt;M&gt; {
    return this.query().findPreserve(ids);
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel__get"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel__get_body"><h3 class="panel-title">BaseModel::get()<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Returns the current value of the column of the given path</p>
</div></div><div class="panel-collapse collapse" id="BaseModel__get_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L954">/src/model/index.ts:954</a>)</span></div><pre class="sourcecode prettyprint .linenums:954">public get(path: any) {
    if (this._intermediates.hasOwnProperty(path)) {
      return this._intermediates[path];
    } else {
      return util.getPropertyOfPath(this._attributes, path);
    }
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel__getChanged"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel__getChanged_body"><h3 class="panel-title">BaseModel::getChanged()<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Returns the list of paths of changed columns</p>
</div></div><div class="panel-collapse collapse" id="BaseModel__getChanged_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L947">/src/model/index.ts:947</a>)</span></div><pre class="sourcecode prettyprint .linenums:947">public getChanged() {
    return Object.keys(this._prev_attributes);
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel__getPrevious"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel__getPrevious_body"><h3 class="panel-title">BaseModel::getPrevious()<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Returns the original value of the column of the given path</p>
</div></div><div class="panel-collapse collapse" id="BaseModel__getPrevious_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L965">/src/model/index.ts:965</a>)</span></div><pre class="sourcecode prettyprint .linenums:965">public getPrevious(path: any) {
    return this._prev_attributes[path];
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_group"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_group_body"><h3 class="panel-title">BaseModel.group()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Groups result records</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_group_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L632">/src/model/index.ts:632</a>)</span></div><pre class="sourcecode prettyprint .linenums:632">public static group&lt;M extends BaseModel, G extends ModelColumnNamesWithId&lt;M&gt;, F&gt;(
    this: (new (data?: any) =&gt; M) &amp; typeof BaseModel,
    group_by: G | G[],
    fields?: F,
  ): IQueryArray&lt;M, { [field in keyof F]: number } &amp; Pick&lt;M, G&gt;&gt;;</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_hasMany"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_hasMany_body"><h3 class="panel-title">BaseModel.hasMany()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Adds a has-many association</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_hasMany_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L307">/src/model/index.ts:307</a>)</span></div><pre class="sourcecode prettyprint .linenums:307">public static hasMany(target_model_or_column: string | typeof BaseModel, options?: IAssociationHasManyOptions) {
    this._checkConnection();
    this._connection.addAssociation({ type: 'hasMany', this_model: this, target_model_or_column, options });
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_hasOne"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_hasOne_body"><h3 class="panel-title">BaseModel.hasOne()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Adds a has-one association</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_hasOne_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L315">/src/model/index.ts:315</a>)</span></div><pre class="sourcecode prettyprint .linenums:315">public static hasOne(target_model_or_column: string | typeof BaseModel, options?: IAssociationHasOneOptions) {
    this._checkConnection();
    this._connection.addAssociation({ type: 'hasOne', this_model: this, target_model_or_column, options });
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_index"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_index_body"><h3 class="panel-title">BaseModel.index()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Adds an index to this model</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_index_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L263">/src/model/index.ts:263</a>)</span></div><pre class="sourcecode prettyprint .linenums:263">public static index(columns: { [column: string]: 1 | -1 }, options: { name?: string, unique?: boolean } = {}) {
    this._checkConnection();
    if (!options.name) {
      options.name = Object.keys(columns).join('_');
    }
    this._indexes.push({ columns, options });
    this._connection._schema_changed = true;
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel__isDirty"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel__isDirty_body"><h3 class="panel-title">BaseModel::isDirty()<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Returns true if there is some changed columns</p>
</div></div><div class="panel-collapse collapse" id="BaseModel__isDirty_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L940">/src/model/index.ts:940</a>)</span></div><pre class="sourcecode prettyprint .linenums:940">public isDirty() {
    return Object.keys(this._prev_attributes).length &gt; 0;
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_lean_query"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_lean_query_body"><h3 class="panel-title">BaseModel.lean_query<span class="label label-static">static</span><span class="label label-property">property</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Applies the lean option for all queries for this Model</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_lean_query_body"><div class="panel-body"><div></div><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L95">/src/model/index.ts:95</a>)</span></div><pre class="sourcecode prettyprint .linenums:95">public static lean_query = false;</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_newModel"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_newModel_body"><h3 class="panel-title">BaseModel.newModel()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Returns a new model class extending BaseModel</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_newModel_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L132">/src/model/index.ts:132</a>)</span></div><pre class="sourcecode prettyprint .linenums:132">public static newModel(connection: Connection, name: string, schema: IModelSchema): typeof BaseModel {
    // tslint:disable-next-line:variable-name max-classes-per-file
    const NewModel = class extends BaseModel { };
    NewModel.connection(connection, name);
    // tslint:disable-next-line:forin
    for (const column_name in schema) {
      const property = schema[column_name];
      NewModel.column(column_name, property);
    }
    return NewModel;
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_order"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_order_body"><h3 class="panel-title">BaseModel.order()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Specifies orders of result</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_order_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L622">/src/model/index.ts:622</a>)</span></div><pre class="sourcecode prettyprint .linenums:622">public static order&lt;M extends BaseModel&gt;(
    this: (new (data?: any) =&gt; M) &amp; typeof BaseModel,
    orders: string,
  ): IQueryArray&lt;M&gt; {
    return this.query().order(orders);
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_query"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_query_body"><h3 class="panel-title">BaseModel.query()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Creates q query object</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_query_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L555">/src/model/index.ts:555</a>)</span></div><pre class="sourcecode prettyprint .linenums:555">public static query&lt;M extends BaseModel&gt;(
    this: (new (data?: any) =&gt; M) &amp; typeof BaseModel,
  ): IQueryArray&lt;M&gt; {
    return new Query&lt;M&gt;(this);
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel__reset"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel__reset_body"><h3 class="panel-title">BaseModel::reset()<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Resets all changes</p>
</div></div><div class="panel-collapse collapse" id="BaseModel__reset_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L1006">/src/model/index.ts:1006</a>)</span></div><pre class="sourcecode prettyprint .linenums:1006">public reset() {
    // tslint:disable-next-line:forin
    for (const path in this._prev_attributes) {
      const value = this._prev_attributes[path];
      this.set(path, value);
    }
    this._prev_attributes = {};
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel__save"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel__save_body"><h3 class="panel-title">BaseModel::save()<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Saves data to the database</p>
</div></div><div class="panel-collapse collapse" id="BaseModel__save_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L1046">/src/model/index.ts:1046</a>)</span></div><pre class="sourcecode prettyprint .linenums:1046">public async save(
    options: { skip_log?: boolean, validate?: boolean } = {},
  ): Promise&lt;this&gt; {
    const ctor = this.constructor as typeof BaseModel;
    await ctor._checkReady();
    if (!this._is_persisted) {
      this._applyDefaultValues();
    }
    if (options.validate !== false) {
      await this.validate();
      return await this.save({ ...options, validate: false });
    }
    this._runCallbacks('save', 'before');
    if (this._is_persisted) {
      this._runCallbacks('update', 'before');
      try {
        await this._update(options);
      } finally {
        this._runCallbacks('update', 'after');
        this._runCallbacks('save', 'after');
      }
    } else {
      this._runCallbacks('create', 'before');
      try {
        await this._create(options);
      } finally {
        this._runCallbacks('create', 'after');
        this._runCallbacks('save', 'after');
      }
    }
    return this;
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_select"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_select_body"><h3 class="panel-title">BaseModel.select()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Selects columns for result</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_select_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L604">/src/model/index.ts:604</a>)</span></div><pre class="sourcecode prettyprint .linenums:604">public static select&lt;M extends BaseModel, K extends ModelColumnNamesWithId&lt;M&gt;&gt;(
    this: (new (data?: any) =&gt; M) &amp; typeof BaseModel,
    columns: K[],
  ): IQueryArray&lt;M, Pick&lt;M, K&gt;&gt;;</pre></div></div></div></section><span class="fix-anchor" id="BaseModel__set"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel__set_body"><h3 class="panel-title">BaseModel::set()<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Changes the value of the column of the given path</p>
</div></div><div class="panel-collapse collapse" id="BaseModel__set_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L972">/src/model/index.ts:972</a>)</span></div><pre class="sourcecode prettyprint .linenums:972">public set(path: any, value: any) {
    if (this._intermediates.hasOwnProperty(path)) {
      const obj = this._intermediates[path];
      // tslint:disable-next-line:forin
      for (const k in obj) {
        obj[k] = undefined;
      }
      // tslint:disable-next-line:forin
      for (const k in value) {
        obj[k] = value[k];
      }
    } else {
      const parts = path.split('.');
      const prev_value = util.getPropertyOfPath(this._attributes, parts);
      if (prev_value === value) {
        return;
      }
      if (!this._prev_attributes.hasOwnProperty(path)) {
        this._prev_attributes[path] = prev_value;
      }
      let [obj, last] = util.getLeafOfPath(this, parts);
      this._defineProperty(obj, last, path, true);
      util.setPropertyOfPath(this._attributes, parts, value);
      while (parts.length &gt; 1) {
        parts.pop();
        [obj, last] = util.getLeafOfPath(this, parts);
        this._defineProperty(obj, last, parts.join('.'), true);
      }
    }
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_timestamps"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_timestamps_body"><h3 class="panel-title">BaseModel.timestamps()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Adds &#39;created_at&#39; and &#39;updated_at&#39; fields to records</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_timestamps_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L679">/src/model/index.ts:679</a>)</span></div><pre class="sourcecode prettyprint .linenums:679">public static timestamps() {
    this.column('created_at', Date);
    this.column('updated_at', Date);
    this.beforeCreate(function(this: any) {
      const d = new Date();
      this.created_at = this.updated_at = d;
    });
    this.beforeUpdate(function(this: any) {
      const d = new Date();
      this.updated_at = d;
    });
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_update"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_update_body"><h3 class="panel-title">BaseModel.update()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Updates some fields of records that match conditions</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_update_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L665">/src/model/index.ts:665</a>)</span></div><pre class="sourcecode prettyprint .linenums:665">public static async update(updates: any, condition?: object): Promise&lt;number&gt; {
    return await this.query().where(condition).update(updates);
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel__validate"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel__validate_body"><h3 class="panel-title">BaseModel::validate()<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Validates data</p>
</div></div><div class="panel-collapse collapse" id="BaseModel__validate_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L1082">/src/model/index.ts:1082</a>)</span></div><pre class="sourcecode prettyprint .linenums:1082">public validate() {
    this._runCallbacks('validate', 'before');
    const errors: any[] = [];
    const ctor = this.constructor as typeof BaseModel;
    const schema = ctor._schema;
    // tslint:disable-next-line:forin
    for (const column in schema) {
      const property = schema[column];
      if (property.primary_key) {
        continue;
      }
      try {
        ctor._validateColumn(this, column, property);
      } catch (error) {
        errors.push(error.message);
      }
    }
    ctor._validators.forEach((validator: any) =&gt; {
      try {
        const r = validator(this);
        if (r === false) {
          errors.push('validation failed');
        } else if (typeof r === 'string') {
          errors.push(r);
        }
      } catch (e) {
        errors.push(e.message);
      }
    });
    if (errors.length &gt; 0) {
      this._runCallbacks('validate', 'after');
      throw new Error(errors.join(','));
    } else {
      this._runCallbacks('validate', 'after');
    }
  }</pre></div></div></div></section><span class="fix-anchor" id="BaseModel_where"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#BaseModel_where_body"><h3 class="panel-title">BaseModel.where()<span class="label label-static">static</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Finds records by conditions</p>
</div></div><div class="panel-collapse collapse" id="BaseModel_where_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in <a href="https://github.com/croquiscom/cormo/blob/master//src/model/index.ts#L594">/src/model/index.ts:594</a>)</span></div><pre class="sourcecode prettyprint .linenums:594">public static where&lt;M extends BaseModel&gt;(
    this: (new (data?: any) =&gt; M) &amp; typeof BaseModel,
    condition?: object,
  ): IQueryArray&lt;M&gt; {
    return this.query().where(condition);
  }</pre></div></div></div></section></div></div></div><script src="http://code.jquery.com/jquery-1.11.0.min.js"></script><script src="../bootstrap-3.2.0-dist/js/bootstrap.min.js"></script><script src="../google-code-prettify/prettify.js"></script><script src="../script.js"></script><script src="../group-examples.js"></script><a href="https://github.com/croquiscom/cormo"><img class="github-ribbon" src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png" alt="Fork me on GitHub"></a></body></html>